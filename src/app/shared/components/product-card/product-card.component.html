<div
  [routerLink]="['/product', product.id, product.slug]"
  class="cursor-pointer hover:scale-105 transition-transform duration-300 group relative max-w-sm bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl"
>
  <!-- Image Wrapper -->
  <div class="relative">
    <img
      [src]="product.imageCover"
      alt="{{ product.title }}"
      class="w-full h-48 object-cover"
    />

    <!-- Wishlist Heart -->
    <button
      (click)="addToWishlist(product)"
      class="cursor-pointer absolute top-3 right-3 bg-white text-zinc-600 rounded-full p-2 shadow-md transition
             group-hover:bg-red-500 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
    >
      <i class="cursor-pointer fa-solid fa-heart transition group-hover:text-white"></i>
    </button>
  </div>

  <!-- Content -->
  <div class="p-4 space-y-2">
    <h2 class="text-lg font-semibold text-gray-800 truncate">
      {{ product.title }}
    </h2>

    <!-- Rating -->
    <div class="flex items-center text-yellow-500">
      @for (star of [].constructor(5); let i = $index; track i) {
        @if (i < product.ratingsAverage) {
          <svg class="h-4 w-4 fill-current" viewBox="0 0 20 20">
            <path d="M10 15l-5.878 3.09 1.122-6.545L.487 6.91l6.561-.955L10 0l2.952 5.955 6.561.955-4.757 4.635 1.122 6.545z"/>
          </svg>
        } @else {
          <svg class="h-4 w-4 text-gray-300" viewBox="0 0 20 20">
            <path d="M10 15l-5.878 3.09 1.122-6.545L.487 6.91l6.561-.955L10 0l2.952 5.955 6.561.955-4.757 4.635 1.122 6.545z"/>
          </svg>
        }
      }
      <span class="ml-2 text-sm text-gray-500">
        ({{ product.ratingsQuantity }} reviews)
      </span>
    </div>

    <!-- Price -->
    <div class="flex items-center space-x-2">
      @if (product.priceAfterDiscount) {
        <span class="text-xl font-bold text-green-600">
          {{ product.priceAfterDiscount | currency }}
        </span>
        <span class="line-through text-gray-500">
          {{ product.price | currency }}
        </span>
      } @else {
        <span class="text-xl font-bold text-gray-800">
          {{ product.price | currency }}
        </span>
      }
    </div>

    <!-- Add to Cart -->
    <button
      (click)="addToCart(product)"
      class="opacity-0 group-hover:opacity-100 group-hover:scale-105 cursor-pointer mt-3 w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition transform"
    >
      <ng-icon name="faSolidCartShopping" class="inline-block w-4 h-4 mr-2"></ng-icon>
      Add to Cart
    </button>
  </div>
</div>
